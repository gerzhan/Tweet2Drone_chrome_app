// Generated by CoffeeScript 1.5.0
var DRONE;

DRONE = DRONE || {};

DRONE.TweetQueue = (function() {
  var interval, queue, running, speed;
  queue = [];
  interval = null;
  running = false;
  speed = 500;
  return {
    cancel: function() {
      if (running) {
        clearInterval(interval);
        return running = false;
      }
    },
    main: function() {
      if (!running) {
        running = true;
        interval = setInterval(function() {
          var msg, opts, result;
          item = queue.pop();

          if (item !== undefined) {
            var cmd = item['cmd'];
            opts = {
              cmd: cmd.cmd,
              args: cmd.args,
              error: function() {
                return Notifications.droneAction('error', "Error performing " + cmd.cmd + ", not supported", item['meta']);
              },
              success: function() {
                return Notifications.droneAction('success', "Performing " + cmd.cmd, item['meta']);
              }
            };
            return result = DRONE.Translator.translate(opts);
          }
        }, speed);
      }
    },
    push: function(item) {
      return queue.push(item);
    }
  };
})();
